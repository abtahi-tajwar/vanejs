/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ var __webpack_modules__ = ({

/***/ "./src/constants.js":
/*!**************************!*\
  !*** ./src/constants.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EngineAttributes: () => (/* binding */ EngineAttributes),\n/* harmony export */   EventFunctions: () => (/* binding */ EventFunctions),\n/* harmony export */   EventTargets: () => (/* binding */ EventTargets),\n/* harmony export */   appStates: () => (/* binding */ appStates),\n/* harmony export */   appStores: () => (/* binding */ appStores)\n/* harmony export */ });\nvar EngineAttributes = {\n  IF: makeAttr('if'),\n  ELSEIF: makeAttr('elseif'),\n  ELSE: makeAttr('else'),\n  CONDITION: makeAttr('condition'),\n  BIND: makeAttr('bind'),\n  REPEAT: makeAttr('repeat'),\n  REPEAT_ITEM: makeAttr('ritem'),\n  NESTED_LEVEL: makeAttr('nested-level'),\n  ID: makeAttr('id'),\n  TARGET: makeAttr('target'),\n  CONDITION_REMNANT: makeAttr('cond-remnant'),\n  EVENT: makeAttr('on'),\n  EVENT_TARGET: makeAttr('event-target')\n};\nvar EventFunctions = new Proxy({}, {\n  get: function get(target, prop) {\n    // console.log(`Accessing ${prop}`);\n    return target[prop];\n  },\n  set: function set(target, prop, value) {\n    // console.log(`Setting ${prop}`);\n    target[prop] = value;\n    // Here you can trigger re-renders if you build UI binding\n    return true;\n  }\n});\nvar EventTargets = new Proxy({}, {\n  get: function get(target, prop) {\n    // console.log(`Accessing ${prop}`);\n    return target[prop];\n  },\n  set: function set(target, prop, value) {\n    // console.log(`Setting ${prop}`);\n    target[prop] = value;\n    // Here you can trigger re-renders if you build UI binding\n    return true;\n  }\n});\nvar appStates = new Proxy({}, {\n  get: function get(target, prop) {\n    // console.log(`Accessing ${prop}`);\n    return target[prop];\n  },\n  set: function set(target, prop, value) {\n    // console.log(`Setting ${prop}`);\n    target[prop] = value;\n    // Here you can trigger re-renders if you build UI binding\n    return true;\n  }\n});\nvar appStores = new Proxy({}, {\n  get: function get(target, prop) {\n    // console.log(`Accessing ${prop}`);\n    return target[prop];\n  },\n  set: function set(target, prop, value) {\n    // console.log(`Setting ${prop}`);\n    target[prop] = value;\n    // Here you can trigger re-renders if you build UI binding\n    return true;\n  }\n});\n\n//# sourceURL=webpack://src/./src/constants.js?");

/***/ }),

/***/ "./src/helper.js":
/*!***********************!*\
  !*** ./src/helper.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseEventQuery: () => (/* binding */ parseEventQuery)\n/* harmony export */ });\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction parseEventQuery(query) {\n  var result = [];\n  var pairs = query.split(';').map(function (pair) {\n    return pair.trim();\n  }).filter(Boolean);\n  var _iterator = _createForOfIteratorHelper(pairs),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var pair = _step.value;\n      var _pair$split = pair.split(':'),\n        _pair$split2 = _slicedToArray(_pair$split, 2),\n        event = _pair$split2[0],\n        funcCall = _pair$split2[1];\n      if (!event || !funcCall) continue;\n      var match = funcCall.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\\((.*)\\)$/);\n      if (!match) continue;\n      var funcName = match[1].trim();\n      var paramString = match[2].trim();\n      var params = [];\n      var current = '';\n      var inString = false;\n      var quoteChar = '';\n      for (var i = 0; i < paramString.length; i++) {\n        var _char = paramString[i];\n        if (inString) {\n          if (_char === quoteChar) {\n            inString = false;\n          }\n          current += _char;\n        } else {\n          if (_char === '\\'' || _char === '\"') {\n            inString = true;\n            quoteChar = _char;\n            current += _char;\n          } else if (_char === ',') {\n            params.push(cleanParam(current.trim()));\n            current = '';\n          } else {\n            current += _char;\n          }\n        }\n      }\n      if (current.trim()) {\n        params.push(cleanParam(current.trim()));\n      }\n      result.push({\n        event: event.trim(),\n        funcName: funcName,\n        params: params\n      });\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return result;\n  function cleanParam(str) {\n    // Trim quotes if they exist\n    if (str.startsWith(\"'\") && str.endsWith(\"'\") || str.startsWith('\"') && str.endsWith('\"')) {\n      return str.slice(1, -1);\n    }\n\n    // Try converting to number if it's a pure number\n    if (!isNaN(str) && str.trim() !== '') {\n      return Number(str);\n    }\n\n    // Otherwise, return as-is (like {state.name})\n    return str;\n  }\n}\n\n//# sourceURL=webpack://src/./src/helper.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $deleteState: () => (/* binding */ $deleteState),\n/* harmony export */   $event: () => (/* binding */ $event),\n/* harmony export */   $getState: () => (/* binding */ $getState),\n/* harmony export */   $getStore: () => (/* binding */ $getStore),\n/* harmony export */   $setState: () => (/* binding */ $setState),\n/* harmony export */   $setStore: () => (/* binding */ $setStore),\n/* harmony export */   initStore: () => (/* binding */ initStore)\n/* harmony export */ });\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ \"./src/helper.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"./src/constants.js\");\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar prefix = 'vn'; // or '' for no prefix\n\nfunction makeAttr(name) {\n  return prefix ? \"data-\".concat(prefix, \"-\").concat(name) : \"data-\".concat(name);\n}\nvar templateCache = null;\nfunction $setState(name, obj) {\n  _constants__WEBPACK_IMPORTED_MODULE_1__.appStates[name] = obj;\n  updateDOMValues(name);\n}\nfunction $getState(name) {\n  return _constants__WEBPACK_IMPORTED_MODULE_1__.appStates[name];\n}\nfunction $deleteState(name) {\n  delete _constants__WEBPACK_IMPORTED_MODULE_1__.appStates[name]; // <--- was wrong before, fixed: it should be `appStates`, not `templateEngineStates`\n  updateDOMValues(null);\n}\nfunction $setStore(name, obj) {\n  _constants__WEBPACK_IMPORTED_MODULE_1__.appStores[name] = obj;\n  _constants__WEBPACK_IMPORTED_MODULE_1__.appStates[name] = obj;\n  var existingStore = sessionStorage.getItem(\"store\");\n  if (!existingStore) {\n    sessionStorage.setItem(\"store\", JSON.stringify(_defineProperty({}, name, obj)));\n  } else {\n    var existing = JSON.parse(existingStore);\n    existing[name] = obj;\n    sessionStorage.setItem(\"store\", JSON.stringify(existing));\n  }\n  updateDOMValues(name);\n}\nfunction $getStore(name) {\n  try {\n    var store = JSON.parse(sessionStorage.getItem(\"store\") || \"{}\");\n    return store[name] !== undefined ? store[name] : null;\n  } catch (e) {\n    console.error(\"Failed to parse store:\", e);\n    return null;\n  }\n}\nfunction $event(name, func) {\n  _constants__WEBPACK_IMPORTED_MODULE_1__.EventFunctions[name] = func;\n}\nfunction initStore() {\n  try {\n    var existingStore = sessionStorage.getItem(\"store\");\n    if (!existingStore) {\n      console.warn(\"No store found in sessionStorage.\");\n      return;\n    }\n    var parsedStore = JSON.parse(existingStore);\n    if (_typeof(parsedStore) !== 'object' || parsedStore === null) {\n      console.error(\"Invalid store format in sessionStorage.\");\n      return;\n    }\n\n    // Push all keys into appStores and appStates\n    for (var _i = 0, _Object$entries = Object.entries(parsedStore); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n      $setStore(key, value);\n    }\n  } catch (e) {\n    console.error(\"Failed to initialize store:\", e);\n  }\n}\nvar refactorDOM = function refactorDOM() {\n  var _cache = document.body.cloneNode(true);\n  var selectorString = Object.values(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes).map(function (attr) {\n    return \"[\".concat(attr, \"]\");\n  }).join(', ');\n  var domElements = document.querySelectorAll(selectorString);\n  var vnElements = _cache.querySelectorAll(selectorString);\n  var engineAttrList = Object.values(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes);\n  domElements.forEach(function (domEl, idx) {\n    var attributes = Array.from(domEl.attributes);\n    attributes.forEach(function (attr, attrIdx) {\n      if (engineAttrList.includes(attr.name)) {\n        var randomId = crypto.getRandomValues(new Uint8Array(8)).map(function (b) {\n          return b.toString(36).padStart(2, '0');\n        }).join('').slice(0, 8);\n\n        // Set the original attribute on cloned node\n        domEl.setAttribute(attr.name, attr.value);\n        domEl.setAttribute(makeAttr(\"target\"), idx);\n\n        // Remove original attribute from live DOM\n        // domEl.removeAttribute(attr.name);\n\n        // Set a new random ID attribute (e.g., data-vn-abc123)\n        vnElements[idx].setAttribute(makeAttr(\"id\"), idx);\n        if (attr.name === _constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.REPEAT) {\n          var level = setNestedLevel(vnElements[idx], attr.name, _constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.NESTED_LEVEL);\n          domEl.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.NESTED_LEVEL, level);\n        }\n      }\n    });\n  });\n  unwrapTemplates();\n  templateCache = _cache;\n};\nfunction unwrapTemplates() {\n  var root = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.body;\n  var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: function acceptNode(node) {\n      return node.tagName === 'TEMPLATE' ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    }\n  });\n  var templates = [];\n  var node;\n  while (node = walker.nextNode()) {\n    templates.push(node);\n  }\n  templates.forEach(function (template) {\n    var parent = template.parentNode;\n    if (!parent) return;\n\n    // Recursively unwrap inside the template first\n    unwrapTemplates(template.content);\n\n    // Move the content into a fragment\n    var fragment = document.createDocumentFragment();\n    fragment.appendChild(template.content.cloneNode(true));\n    parent.replaceChild(fragment, template);\n  });\n}\nvar updateDOMValues = function updateDOMValues(stateName) {\n  var conditionals = templateCache.querySelectorAll(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF, \"], [\").concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION, \"]\"));\n  renderConditions(conditionals);\n  var elements = document.querySelectorAll(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.BIND, \"^=\\\"\").concat(stateName, \".\\\"]\"));\n  renderBinds(elements);\n  var repeatElements = document.querySelectorAll(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.REPEAT, \"^=\\\"\").concat(stateName, \".\\\"]\"));\n  renderRepeats(repeatElements);\n  var eventElements = document.querySelectorAll(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.EVENT, \"]\"));\n  renderEvents(eventElements);\n};\nfunction reRenderDOM(root) {\n  var skip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var binds = [];\n  var conditions = [];\n  var repeats = [];\n  var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: function acceptNode(node) {\n      if (skip && node.hasAttribute(skip)) {\n        return NodeFilter.FILTER_SKIP;\n      }\n      return NodeFilter.FILTER_ACCEPT;\n    }\n  }, false);\n  var node;\n  while (node = walker.nextNode()) {\n    if (node.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.BIND)) {\n      binds.push(node);\n    } else if (node.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION)) {\n      conditions.push(node);\n    } else if (node.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.REPEAT)) {\n      repeats.push(node);\n    }\n  }\n  if (conditions.length) renderConditions(conditions);\n  if (binds.length) renderBinds(binds);\n  if (repeats.length) renderRepeats(repeats);\n}\nfunction renderConditions(elements) {\n  // To be implemented\n  elements.forEach(function (el) {\n    if (el.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF) && !el.parentNode.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION)) {\n      var domEl = document.querySelector(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET, \"=\\\"\").concat(el.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID), \"\\\"]\"));\n      if (!domEl) return;\n      var alreadyRemoved = domEl.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION_REMNANT);\n      var condition = el.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF);\n      var result = evaluateCondition(condition, _constants__WEBPACK_IMPORTED_MODULE_1__.appStates);\n      if (result && alreadyRemoved) {\n        reAddConditionItem(domEl);\n      } else if (!result && !alreadyRemoved) {\n        removeConditionItem(domEl);\n      }\n    } else if (el.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION)) {\n      var foundTrue = false;\n      Array.from(el.children).forEach(function (block) {\n        if (block.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF) || block.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ELSEIF) || block.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ELSE)) {\n          var _domEl = document.querySelector(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET, \"=\\\"\").concat(block.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID), \"\\\"]\"));\n          if (!_domEl) return;\n          var _alreadyRemoved = _domEl.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION_REMNANT);\n          if (block.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF)) {\n            var _condition = block.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.IF);\n            var _result = evaluateCondition(_condition, _constants__WEBPACK_IMPORTED_MODULE_1__.appStates);\n            foundTrue = _result;\n            if (_result && _alreadyRemoved) {\n              reAddConditionItem(_domEl);\n            } else if (!_result && !_alreadyRemoved) {\n              removeConditionItem(_domEl);\n            }\n          } else if (block.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ELSEIF)) {\n            var _condition2 = block.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ELSEIF);\n            var _result2 = evaluateCondition(_condition2, _constants__WEBPACK_IMPORTED_MODULE_1__.appStates);\n            if (!foundTrue) {\n              if (_result2 && _alreadyRemoved) {\n                reAddConditionItem(_domEl);\n                foundTrue = true;\n              } else if (!_result2 && !_alreadyRemoved) {\n                removeConditionItem(_domEl);\n              }\n            } else {\n              if (!_alreadyRemoved) {\n                removeConditionItem(_domEl);\n              }\n            }\n          } else {\n            if (!foundTrue && _alreadyRemoved) {\n              reAddConditionItem(_domEl);\n            } else if (foundTrue && !_alreadyRemoved) {\n              removeConditionItem(_domEl);\n            }\n          }\n        }\n      });\n    }\n  });\n}\nfunction removeConditionItem(dom) {\n  var remnant = document.createElement(\"div\");\n  remnant.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.CONDITION_REMNANT, null);\n  remnant.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET, dom.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET));\n  dom.parentNode.replaceChild(remnant, dom);\n}\nfunction reAddConditionItem(dom) {\n  var targetId = dom.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET);\n  var cacheDOM = getTargetDOM(templateCache, targetId);\n  var cloned = cacheDOM.cloneNode(true);\n  cloned.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET, targetId);\n  // Recursively update all children\n  var descendants = cloned.querySelectorAll(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID, \"]\"));\n  descendants.forEach(function (child) {\n    var id = child.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID);\n    child.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.TARGET, id);\n    child.removeAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID);\n  });\n  cloned.removeAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID);\n  reRenderDOM(cloned);\n  dom.parentNode.replaceChild(cloned, dom);\n}\nfunction renderEvents(elements) {\n  elements.forEach(function (el) {\n    if (!el.hasAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.EVENT_TARGET)) {\n      var eventId = generateRandomID();\n      el.setAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.EVENT_TARGET, eventId);\n      var query = el.getAttribute(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.EVENT);\n      var parsedQuery = (0,_helper__WEBPACK_IMPORTED_MODULE_0__.parseEventQuery)(query);\n      console.log(\"Parsed query\", parsedQuery);\n      parsedQuery.forEach(function (qitem) {\n        el.addEventListener(qitem.event, function () {\n          return eventRootHandler(qitem);\n        });\n      });\n      _constants__WEBPACK_IMPORTED_MODULE_1__.EventTargets[eventId] = {\n        click: function click() {\n          return eventRootHandler(eventId);\n        }\n      };\n      console.log(\"Event targetsl\", _constants__WEBPACK_IMPORTED_MODULE_1__.EventTargets);\n    }\n  });\n}\nfunction eventRootHandler(query) {\n  console.log(\"The query\", query);\n  var modified = query.params.map(function (p) {\n    if (typeof p === \"string\" && p.startsWith('{') && p.endsWith('}')) {\n      var path = removeCurlyBraces(p);\n      return getValueByPath(_constants__WEBPACK_IMPORTED_MODULE_1__.appStates, path);\n    }\n    return p;\n  });\n  console.log(\"Modified\", modified);\n  _constants__WEBPACK_IMPORTED_MODULE_1__.EventFunctions[query.funcName]({\n    params: modified\n  });\n}\n// Helper functions\nfunction getValueByPath(obj, path) {\n  var normalizedPath = path.replace(/\\[(\\w+)\\]/g, '.$1'); // arr[2] -> arr.2\n  var keys = normalizedPath.split('.');\n  var current = obj;\n  var _iterator = _createForOfIteratorHelper(keys),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var key = _step.value;\n      if (current === undefined || current === null) {\n        return undefined; // path not found\n      }\n      current = current[key];\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return current;\n}\nfunction getTargetDOM(dom, id) {\n  return dom.querySelector(\"[\".concat(_constants__WEBPACK_IMPORTED_MODULE_1__.EngineAttributes.ID, \"=\\\"\").concat(id, \"\\\"]\"));\n}\nfunction setNestedLevel(node) {\n  var repeatAttr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'data-repeat';\n  var levelAttr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'data-repeat-level';\n  var parent = node.parentElement;\n  var level = 0;\n  while (parent) {\n    if (parent.hasAttribute(repeatAttr)) {\n      level++;\n    }\n    parent = parent.parentElement;\n  }\n  node.setAttribute(levelAttr, level.toString());\n  return level;\n}\nfunction evaluateCondition(expression, state) {\n  if (state) {\n    try {\n      // Replace all {variable} with real values from state\n      var populatedExpr = expression.replace(/\\{(.*?)\\}/g, function (_, path) {\n        var value = getValueByPath(state, path.trim());\n\n        // If value is string, wrap with quotes\n        if (typeof value === 'string') {\n          return \"'\".concat(value, \"'\");\n        } else if (_typeof(value) === 'object') {\n          return JSON.stringify(value); // or throw error\n        } else {\n          return value;\n        }\n      });\n      return Function(\"return (\".concat(populatedExpr, \");\"))();\n    } catch (e) {\n      console.warn(\"Failed to evaluate condition:\", expression, e);\n      return false;\n    }\n  }\n}\n;\nfunction generateRandomID() {\n  var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=';\n  var array = new Uint8Array(length);\n  crypto.getRandomValues(array);\n  return Array.from(array, function (x) {\n    return chars[x % chars.length];\n  }).join('');\n}\nfunction removeCurlyBraces(str) {\n  str = str.trim(); // remove any surrounding whitespace\n\n  if (str.startsWith(\"{\") && str.endsWith(\"}\")) {\n    return str.slice(1, -1);\n  }\n  return str;\n}\n\n// Execution Layer\nwindow.addEventListener('load', function () {\n  refactorDOM();\n  initStore();\n  // reRenderDOM(this.document);\n});\nwindow.VaneJS = {\n  $getState: $getState,\n  $setState: $setState,\n  $deleteState: $deleteState\n};\n\n//# sourceURL=webpack://src/./src/index.js?");

/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
/******/ 
/******/ // startup
/******/ // Load entry module and return exports
/******/ // This entry module can't be inlined because the eval devtool is used.
/******/ var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 
